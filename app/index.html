<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<title>lobbymail</title>
		<meta name="description" content="">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

		<!-- build:css styles/vendor.css -->
		<!-- bower:css -->
		<!-- endbower -->
		<!-- endbuild -->

		<!-- build:css styles/main.css -->
		<link rel="stylesheet" href="/styles/main.css">
		<!-- endbuild -->

	</head>
	<body>
		<script type="text/x-handlebars" data-template-name='index'>
			<header class="main-header">
			<h1>{{ link-to "Lobbymail" "index" }}</h1>
				<nav>
					<ul>
						<li>{{# link-to "inbox" }}Posteingang {{# if model.inbox.unreadCount }}<span class="unread-count">{{ model.inbox.unreadCount }}</span>{{/ if }}{{/ link-to }}</li>
						<li>{{# link-to "files" }}Dokumente{{/ link-to }}</li>
					</ul>
				</nav>
			</header>
			<div class="stage">
				{{ outlet }}
			</div>
		</script>
		<script type="text/x-handlebars" data-template-name="inbox">
			<nav class="threads list-view">
			<ul>
			{{# each thread in model }}
			{{# link-to "thread" thread tagName="li" classNameBindings="thread.unreadClass thread.hasAttachments" title=thread.description }}
				<p class="author">{{ thread.initiator.name }} <span class="affiliation">{{ thread.initiator.affiliation }}</span></p>
				<p class="subject">{{ thread.subject }}</p>
			{{/ link-to }}
			{{/ each }}
			</ul>
			</nav>
			<div class="messages detail-placeholder">
			<p>Bitte wählen Sie<br>einen Nachrichtenverlauf aus.</p>
			</div>
			{{ outlet }}
		</script>
		<script type="text/x-handlebars" data-template-name="files">
			<nav class="folder list-view">
			<ul>
			{{# each file in model }}
			{{# link-to "file" file.id tagName="li" classNameBindings="file.isAttachment" }}
				<p class="filename file-{{ file.type }}">{{ file.friendlyName }}</p>
			{{/ link-to }}
			{{/ each }}
			</ul>
			</nav>
			<div class="file-browser detail-placeholder">
			<p>Bitte wählen Sie<br>ein Dokument aus.</p>
			</div>
			<div class="file-browser detail-view">
			{{ outlet }}
			</div>
		</script>
		<script type="text/x-handlebars" data-template-name="thread">
			{{# each message in model.messages }}
			<article id="message{{ message.id }}" class="message {{ if message.unread 'unread' }}" {{ action "markAsRead" message on="click" }}>
				<header>
					{{# if message.from }}
					<dl class="from">
						<dt>Von</dt>
						<dd>{{ render "person-list" message.from }}</dd>
					</dl>
					{{/ if }}
					{{# if message.from }}
					<dl class="to">
						<dt>An</dt>
						<dd>{{ render "person-list" message.to }}</dd>
					</dl>
					{{/ if }}
					{{# if message.cc }}
					<dl class="cc">
						<dt>CC</dt>
						<dd>{{ render "person-list" message.cc }}</dd>
					</dl>
					{{/ if }}

					<dl class="subject-block">
						<dt>Betreff</dt>
						<dd><h2 class="subject">{{ message.subject }}</h2></dd>
					</dl>
					<p class="date">{{ date message.date }}</p>
				</header>
				<pre class="body">{{ message.body }}</pre>
				{{# if message.attachments }}
				<dl class="attachments">
					<dt>{{ plural message.attachmentCount 1="Anhang" default="Anhänge" }}</dt>
					{{# each file in message.attachments }}
					<dd>{{# link-to "attachment" file.id classBinding="file.typeClass" }}{{ file.friendlyName }}{{/ link-to }}</dd>
					{{/ each }}
				</dl>
				{{/ if }}
			</article>
			{{/ each }}
			{{ outlet }}
		</script>
		<script type="text/x-handlebars" data-template-name="file">
			<header class="meta">
			<dl class="filename">
				<dt>Dateiname</dt>
				<dd><h2>{{ model.name }}</h2></dd>
			</dl>
			<p><a href="{{ model.path }}" class="download" title="Dieses Dokument herunterladen">Download</a></p>
			{{# if model.message }}
			<dl class="thread">
				<dt>Angehängt an</dt>
				<dd>{{# link-to "thread" model.message.thread classNameBindings="model.message.thread.unreadClass" }}<span class="subject">{{ model.message.thread.subject }}</span>{{/ link-to }}</dd>
			</dl>
			{{/ if }}
			</header>
			<section class="document">
				<div class="controls">
					<input type="range" class="zoom-control" value="0.96" min="0.1" max="4" step="0.05">
				</div>
				<div class="pages zoomable">
					{{# each page in model.pages }}
					<p class="page">
					<span><img src="{{ page.path }}" width="{{ page.width }}" height="{{ page.height }}" style="height: 94vh"></span>
					</p>
					{{/ each }}
				</div>
			</section>
			{{ outlet }}
		</script>
		<script type="text/x-handlebars" data-template-name="person-list">
		<ul class="people">
			{{# each person in model }}
			<li><span class="name">{{ person.name }}</span> <span class="email">{{ person.email }}</span></li>
			{{/ each }}
		</ul>
		</script>
		<script type="text/x-handlebars" data-template-name="attachment">
			<div class="overlay">
			{{# link-to "thread" model.message.thread tagName="div" class="close" title="Dokumentenansicht schließen" }}&times;{{/ link-to }}
			{{ render "file" model }}
			{{ outlet }}
			</div>
		</script>
		<div id="app-wrapper">

		</div>

		<!-- build:js scripts/vendor.js -->
		<script src="/bower_components/jquery/dist/jquery.js"></script>
		<script src="/bower_components/rangeslider.js/dist/rangeslider.js"></script>
		<script src="/bower_components/fastclick/lib/fastclick.js"></script>
		<script src="/bower_components/ember/ember-template-compiler.js"></script>
		<script src="/bower_components/ember/ember.prod.js"></script>
		<!-- endbuild -->

		<!-- build:js scripts/main.js -->
		<script src="/scripts/main.js"></script>
		<!-- endbuild -->
</body>
</html>
