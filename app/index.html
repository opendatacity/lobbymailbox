<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<title>lobbymail</title>
		<meta name="description" content="">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

		<!-- build:css styles/vendor.css -->
		<!-- bower:css -->
		<!-- endbower -->
		<!-- endbuild -->

		<!-- build:css styles/main.css -->
		<link rel="stylesheet" href="/styles/main.css">
		<!-- endbuild -->

	</head>
	<body>
		<script type="text/x-handlebars" data-template-name='index'>
			<header class="main-header">
			<h1>{{ link-to "Lobbymail" "index" }}</h1>
			</header>
			<div class="stage">
				<nav class="threads">
				<ul>
				{{# each thread in model }}
				{{# link-to "thread" thread tagName="li" classNameBindings="thread.unreadClass thread.hasAttachments" }}
					<p class="author">{{ thread.initiator.name }} <span class="affiliation">{{ thread.initiator.affiliation }}</span></p>
					<p class="subject">{{ thread.subject }}</p>
				{{/ link-to }}
				{{/ each }}
				</ul>
				</nav>
				{{ outlet }}
			</div>
		</script>
		<script type="text/x-handlebars" data-template-name="thread">
			{{# each message in model.messages }}
			<article class="message {{ if message.unread 'unread' }}" {{ action "markAsRead" message on="click" }}>
				<header>
					{{# if message.from }}
					<dl class="from">
						<dt>Von</dt>
						<dd>{{ render "person-list" message.from }}</dd>
					</dl>
					{{/ if }}
					{{# if message.from }}
					<dl class="to">
						<dt>An</dt>
						<dd>{{ render "person-list" message.to }}</dd>
					</dl>
					{{/ if }}
					{{# if message.cc }}
					<dl class="cc">
						<dt>CC</dt>
						<dd>{{ render "person-list" message.cc }}</dd>
					</dl>
					{{/ if }}

					<dl class="subject-block">
						<dt>Betreff</dt>
						<dd><h2 class="subject">{{ message.subject }}</h2></dd>
					</dl>
					<p class="date">{{ date message.date }}</p>
				</header>
				<pre class="body">{{ message.body }}</pre>
				{{# if message.attachments }}
				<dl class="attachments">
					<dt>Anh√§nge</dt>
					{{# each attachment in message.attachments }}
					<dd><a href="/attachments/{{ message.id }}/{{ attachment }}">{{ attachment }}</a></dd>
					{{/ each }}
				</dl>
				{{/ if }}
			</article>
			{{/ each }}
			{{ outlet }}
		</script>
		<script type="text/x-handlebars" data-template-name="person-list">
		<ul class="people">
			{{# each person in model }}
			<li><span class="name">{{ person.name }}</span> <span class="email">{{ person.email }}</span></li>
			{{/ each }}
		</ul>
		</script>
		<div id="app-wrapper">

		</div>

		<!-- build:js scripts/vendor.js -->
		<script src="/bower_components/jquery/dist/jquery.js"></script>
		<script src="/bower_components/fastclick/lib/fastclick.js"></script>
		<script src="/bower_components/ember/ember-template-compiler.js"></script>
		<script src="/bower_components/ember/ember.debug.js"></script>
		<!-- endbuild -->

		<!-- build:js scripts/main.js -->
		<script src="/scripts/main.js"></script>
		<!-- endbuild -->
</body>
</html>
